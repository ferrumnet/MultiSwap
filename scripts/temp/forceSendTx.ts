import { ethers } from "ethers";

// RPC endpoint URL
// const rpcUrl = "https://base-mainnet.core.chainstack.com/e7aa01c976c532ebf8e2480a27f18278"
const rpcUrl = "https://nd-829-997-700.p2pify.com/790712c620e64556719c7c9f19ef56e3" // Arbitrum

// Create a provider
const provider = new ethers.JsonRpcProvider(rpcUrl);
const privateKey = process.env.PRIVATE_KEY0!;
const wallet = new ethers.Wallet(privateKey, provider);

// The raw transaction data
const rawTx = {
    to: "0xFFa29E1391B1aC1C42d1C52Aa699771Dd2138b66", // Address of the receiver or contract
    value: 10, // Amount to send (for ETH transfers)
    data: "0xb43d2a4d0000000000000000000000000000000000000000000000000de0b6b3a7640000000000000000000000000000000000000000000000000000000000000000c7350000000000000000000000009f6abbf0ba6b5bfa27f4deb6597cc6ec20573fda000000000000000000000000af88d065e77c8cc2239327c5edb3a432268e5831000000000000000000000000111111125421ca6dc452d289314280a0f8842a6500000000000000000000000000000000000000000000000000000000000001800000000000000000000000000000000000000000000000000000000000002105000000000000000000000000833589fcd6edb6e08f4c7c32d4f71b54bda02913000000000000000000000000cebb7265ed625f8df2336c00d0ec6656bea9e6bb1e37c8024d387c15421eb2dacadf4067bd899f41f7edb06f0fd925b9a94bb5180000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000046000000000000000000000000000000000000000000000000000000000000002a807ed2379000000000000000000000000e37e799d5077682fa0a244d46e5649f71457bd090000000000000000000000009f6abbf0ba6b5bfa27f4deb6597cc6ec20573fda000000000000000000000000af88d065e77c8cc2239327c5edb3a432268e58310000000000000000000000003fec70f319a4145eba17765ae0c64b2232fe5bae000000000000000000000000ffa29e1391b1ac1c42d1c52aa699771dd2138b660000000000000000000000000000000000000000000000000de0b6b3a7640000000000000000000000000000000000000000000000000000000000000000c73500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000120000000000000000000000000000000000000000000000000000000000000015800000000000000000000000000000000000000000000013a00010c00001a0020d6bdbf789f6abbf0ba6b5bfa27f4deb6597cc6ec20573fda00a007e5c0d20000000000000000000000000000000000000000000000000000ce00006700206ae4071138002dc6c03fec70f319a4145eba17765ae0c64b2232fe5bae57b85fef094e10b5eecdf350af688299e955337800000000000000000000000000000000000000000000000000000000000000019f6abbf0ba6b5bfa27f4deb6597cc6ec20573fda00206ae40711b8002dc6c057b85fef094e10b5eecdf350af688299e9553378111111125421ca6dc452d289314280a0f8842a65000000000000000000000000000000000000000000000000000000000000000182af49447d8a07e3bd95bd0d56f35241523fbab10020d6bdbf78af88d065e77c8cc2239327c5edb3a432268e5831111111125421ca6dc452d289314280a0f8842a6500000000000000007c2ad3dd0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000080608d9f19a066bba2ff933caa85ed91a91948d474b3b54687c4cf925692f344e2000000000000000000000000000000000000000000000000000000006643adeb00000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004159d862aa503a2dca82345573ef45e9fd2457b112ea2977b7aefa7a9e627e57bb7f1d88b6d7a58ef2c4885c80c5c485a4660451c529c3603561dffb935be9e9911c00000000000000000000000000000000000000000000000000000000000000", // Encoded contract call or empty for plain ETH transfer
    gasLimit: 1000000, // Maximum gas to spend
    gasPrice: 300000000, // Gas price in wei
};

console.log("Using wallet address: " + wallet.address);

async function sendTransaction() {
    try {
        console.log("Sending transaction...");
        const txResponse = await wallet.sendTransaction(rawTx);
        console.log("Transaction sent! Hash:", txResponse.hash);

        // Wait for the transaction to be mined
        const receipt = await txResponse.wait();
        console.log("Transaction confirmed in block:", receipt!.blockNumber);
    } catch (error) {
        console.error("Error sending transaction:", error);
    }
}

sendTransaction();
